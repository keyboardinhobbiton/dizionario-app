<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Grafico Gerarchico degli Usi dell'Acqua Domestica</title>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <style>
    body {
      font-family: sans-serif;
      margin: 0;
      padding: 20px;
    }
    .node circle {
      fill: #fff;
      stroke: steelblue;
      stroke-width: 2px;
    }
    .node text {
      font: 12px sans-serif;
    }
    .link {
      fill: none;
      stroke: #ccc;
      stroke-width: 1.5px;
    }
    h2 {
      text-align: center;
      color: steelblue;
    }
  </style>
</head>
<body>
  <h2>100 Usi dell'Acqua a Uso Domiciliare</h2>
  <svg width="960" height="800"></svg>
  <script>
    const data = {
      name: "Usi dell'Acqua Domestica",
      children: [
        {
          name: "Cucina",
          children: [
            { name: "Bere acqua potabile" },
            { name: "Cuocere pasta e riso" },
            { name: "Preparare zuppe e brodi" },
            { name: "Bollire verdure" },
            { name: "Lavare frutta e verdura" },
            { name: "Lavare piatti e stoviglie" },
            { name: "Bevande calde", children: [
              { name: "Preparare caffè" },
              { name: "Preparare tè e tisane" }
            ]},
            { name: "Preparazioni alimentari", children: [
              { name: "Fare ghiaccio" },
              { name: "Preparare impasti" },
              { name: "Sbollentare alimenti" },
              { name: "Scongelare alimenti" }
            ]},
            { name: "Pulizia cucina", children: [
              { name: "Pulire piano cottura" },
              { name: "Pulire elettrodomestici" },
              { name: "Lavare il lavello" },
              { name: "Alimentare lavastoviglie" }
            ]}
          ]
        },
        {
          name: "Bagno e Igiene",
          children: [
            { name: "Igiene corpo", children: [
              { name: "Fare la doccia" },
              { name: "Fare il bagno" },
              { name: "Lavare mani e viso" },
              { name: "Spazzolare i denti" },
              { name: "Utilizzare il bidet" },
              { name: "Radersi" }
            ]},
            { name: "Cura capelli", children: [
              { name: "Lavare i capelli" },
              { name: "Colorare i capelli" },
              { name: "Sciacquare prodotti" }
            ]}, 
            { name: "Sanitari", children: [
              { name: "Sciacquone WC" },
              { name: "Contenitore risciacquo" }
            ]},
            { name: "Pulizia bagno", children: [
              { name: "Pulire sanitari" },
              { name: "Lavare accessori" }
            ]}
          ]
        },
        {
          name: "Lavanderia e Pulizia",
          children: [
            { name: "Bucato", children: [
              { name: "Lavatrice" },
              { name: "Pretrattare macchie" },
              { name: "Lavaggio a mano" },
              { name: "Stirare con vapore" },
              { name: "Lavare biancheria" }
            ]},
            { name: "Pulizie casa", children: [
              { name: "Pulire pavimenti" },
              { name: "Soluzioni detergenti" },
              { name: "Pulire vetri e specchi" },
              { name: "Pulire mobili" },
              { name: "Lavare tappeti" },
              { name: "Scopa a vapore" },
              { name: "Sbrinare congelatore" }
            ]}
          ]
        },
        {
          name: "Esterni e Giardinaggio",
          children: [
            { name: "Piante", children: [
              { name: "Piante da appartamento" },
              { name: "Innaffiare giardino" },
              { name: "Irrigare prato" },
              { name: "Fertilizzanti liquidi" },
              { name: "Vaporizzatori piante" },
              { name: "Irrigazione automatica" }
            ]},
            { name: "Esterni", children: [
              { name: "Lavare auto" },
              { name: "Pulire vialetti" },
              { name: "Piscine e idromassaggi" },
              { name: "Fontane decorative" },
              { name: "Pulire mobili esterni" },
              { name: "Lavare attrezzature" }
            ]},
            { name: "Animali", children: [
              { name: "Lavare animali domestici" },
              { name: "Acquari domestici" },
              { name: "Terrari e vivari" }
            ]}
          ]
        },
        {
          name: "Salute e Benessere",
          children: [
            { name: "Terapie", children: [
              { name: "Impacchi caldi/freddi" },
              { name: "Umidificatori" },
              { name: "Gargarismi" },
              { name: "Idroterapia" },
              { name: "Borse acqua calda" },
              { name: "Soluzioni saline" },
              { name: "Sciacqui oculari" }
            ]},
            { name: "Dispositivi medici", children: [
              { name: "Pulire apparecchi acustici" },
              { name: "Pulire apparecchi dentali" },
              { name: "Dispositivi CPAP" },
              { name: "Sterilizzare biberon" }
            ]}
          ]
        },
        {
          name: "Hobby e Tempo Libero",
          children: [
            { name: "Arte", children: [
              { name: "Pittura acquerello" },
              { name: "Lavare pennelli" },
              { name: "Mescolare colori" },
              { name: "Materiali artigianato" }
            ]},
            { name: "Attività", children: [
              { name: "Giardinaggio idroponico" },
              { name: "Attività educative" },
              { name: "Raffreddare bevande" },
              { name: "Pulire attrezzature" }
            ]}
          ]
        },
        {
          name: "Usi Tecnici",
          children: [
            { name: "Impianti", children: [
              { name: "Caldaie riscaldamento" },
              { name: "Sistemi raffreddamento" },
              { name: "Riempire radiatori" },
              { name: "Sistemi umidificazione" },
              { name: "Sistemi antincendio" }
            ]},
            { name: "Manutenzione", children: [
              { name: "Diluire prodotti chimici" },
              { name: "Batterie auto" },
              { name: "Testare perdite" },
              { name: "Pulire filtri" },
              { name: "Pulire dispositivi elettronici" },
              { name: "Pulire occhiali e lenti" }
            ]}
          ]
        }
      ]
    };

    const svg = d3.select("svg"),
          width = +svg.attr("width"),
          height = +svg.attr("height");
    
    // Create a horizontal tree layout
    const root = d3.hierarchy(data);
    const treeLayout = d3.tree().size([height - 100, width - 200]);
    treeLayout(root);
    
    // Add a group element to contain all the elements
    const g = svg.append("g")
                .attr("transform", "translate(100, 20)");
    
    // Add the links between nodes
    g.selectAll('.link')
      .data(root.links())
      .enter()
      .append('path')
      .attr('class', 'link')
      .attr('d', d3.linkHorizontal()
                  .x(d => d.y)
                  .y(d => d.x));
    
    // Add the nodes
    const node = g.selectAll(".node")
      .data(root.descendants())
      .enter()
      .append("g")
      .attr("class", "node")
      .attr("transform", d => `translate(${d.y},${d.x})`);
    
    // Add circles to the nodes
    node.append("circle")
      .attr("r", 5);
    
    // Add labels to the nodes
    node.append("text")
      .attr("dy", 3)
      .attr("x", d => d.children ? -10 : 10)
      .style("text-anchor", d => d.children ? "end" : "start")
      .text(d => d.data.name);
  </script>
</body>
</html>
