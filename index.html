<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Rete Genealogica degli Dei Greci</title>
  <style>
    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      background-color: #f3f4f6;
      margin: 0;
      padding: 20px;
      font-family: sans-serif;
    }
    h2 {
      font-size: 1.5rem;
      font-weight: bold;
      margin-bottom: 1rem;
    }
    svg {
      border: 1px solid #d1d5db;
      border-radius: 8px;
      background-color: #f8fafc;
    }
  </style>
</head>
<body>

  <h2>Rete Genealogica degli Dei Greci</h2>

  <svg id="network" width="700" height="400"></svg>

  <script>
    // Dati degli dÃ¨i greci
    const gods = [
      "Chaos/Gaia/Mountains",
      "Chaos/Gaia/Pontus",
      "Chaos/Gaia/Uranus",
      "Chaos/Eros",
      "Chaos/Erebus",
      "Chaos/Tartarus"
    ];

    // Parsing dei percorsi
    function parseData(paths) {
      const nodes = [];
      const links = [];
      const nodeMap = new Map();

      paths.forEach(path => {
        const parts = path.split("/");
        for (let i = 0; i < parts.length; i++) {
          const id = parts.slice(0, i + 1).join("/");
          if (!nodeMap.has(id)) {
            nodeMap.set(id, {
              id,
              name: parts[i],
              level: i,
              index: nodes.length
            });
            nodes.push(nodeMap.get(id));
          }
          if (i > 0) {
            const sourceId = parts.slice(0, i).join("/");
            links.push({
              source: nodeMap.get(sourceId).index,
              target: nodeMap.get(id).index
            });
          }
        }
      });

      return { nodes, links };
    }

    // Disegno del grafo
    function drawNetwork() {
      const { nodes, links } = parseData(gods);
      const svg = document.getElementById('network');

      const levelGap = 180;
      const nodeGap = 70;

      const levelGroups = {};
      nodes.forEach(node => {
        if (!levelGroups[node.level]) levelGroups[node.level] = [];
        levelGroups[node.level].push(node);
      });

      Object.keys(levelGroups).forEach(level => {
        const nodesInLevel = levelGroups[level];
        const levelHeight = nodesInLevel.length * nodeGap;
        nodesInLevel.forEach((node, idx) => {
          node.x = level * levelGap + 50;
          node.y = 40 + idx * nodeGap - (levelHeight - nodeGap) / 2;
        });
      });

      // Disegna collegamenti
      links.forEach(link => {
        const source = nodes[link.source];
        const target = nodes[link.target];
        const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
        const d = `M${source.x + 100},${source.y + 15} C${source.x + 150},${source.y + 15} ${target.x - 50},${target.y + 15} ${target.x},${target.y + 15}`;
        path.setAttribute("d", d);
        path.setAttribute("stroke", "#3b82f6");
        path.setAttribute("stroke-width", "2");
        path.setAttribute("fill", "none");
        svg.appendChild(path);
      });

      // Disegna nodi
      nodes.forEach(node => {
        const group = document.createElementNS("http://www.w3.org/2000/svg", "g");

        const rect = document.createElementNS("http://www.w3.org/2000/svg", "rect");
        rect.setAttribute("x", node.x);
        rect.setAttribute("y", node.y);
        rect.setAttribute("width", "100");
        rect.setAttribute("height", "30");
        rect.setAttribute("rx", "6");
        rect.setAttribute("fill", "#3b82f6");
        rect.setAttribute("stroke", "#2563eb");
        rect.setAttribute("stroke-width", "2");
        group.appendChild(rect);

        const text = document.createElementNS("http://www.w3.org/2000/svg", "text");
        text.setAttribute("x", node.x + 50);
        text.setAttribute("y", node.y + 20);
        text.setAttribute("text-anchor", "middle");
        text.setAttribute("fill", "white");
        text.setAttribute("font-weight", "bold");
        text.textContent = node.name;
        group.appendChild(text);

        svg.appendChild(group);
      });
    }

    drawNetwork();
  </script>

</body>
</html>
